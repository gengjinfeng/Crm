@model IEnumerable<CRM.Repository.User>
@{
    ViewBag.Title = "用户列表";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/bootstrap-responsive.min.css" rel="stylesheet" />

<div style="height:30px;"></div>
@using (Html.BeginForm("Index", "User", FormMethod.Get))
{
    @Html.TextBox("userName")
    <button type="submit" id="btnSearch" class="btn btn-success">查询</button>
}
<p></p>
<div class="portlet box purple">

    <div class="portlet-title">

        <div class="caption"><i class="icon-globe"></i>用户列表</div>

        <div class="tools">

            <a href="javascript:;" class="collapse"></a>

            <a href="javascript:;" class="reload"></a>

        </div>

    </div>

    <div class="portlet-body">

        <div class="clearfix">

            <div class="btn-group">

                @Html.ActionLink("新增员工", "Create", null, new { @class = "btn btn-success", target = "_blank" })

            </div>

            <div class="btn-group pull-right">

                <button class="btn dropdown-toggle" data-toggle="dropdown">
                    Tools <i class="icon-angle-down"></i>

                </button>

                <ul class="dropdown-menu pull-right">

                    <li><a href="#">Print</a></li>

                    <li><a href="#">Save as PDF</a></li>

                    <li><a href="#">Export to Excel</a></li>

                </ul>

            </div>

        </div>

        <table class="table table-striped table-bordered table-hover" id="sample_1">
            <thead>
                <tr>
                    <th>用户ID</th>
                    <th>真实姓名</th>
                    <th>部门</th>
                    <th>手机</th>
                    <th>电话</th>
                    <th>Email</th>
                    <th>所属角色</th>
                    <th>用户状态</th>
                    <th>操作</th>

                </tr>

            </thead>

            <tbody>
                @foreach (var user in Model)
                {
                    <tr class="odd gradeX">
                        <td>@Html.DisplayFor(modelItem => user.USERID)</td>
                        <td>@Html.DisplayFor(modelItem => user.USERNAME)</td>
                        <td>@Html.DisplayFor(modelItem => user.Department.DEPARTMENTNAME)</td>
                        <td>@Html.DisplayFor(modelItem => user.MOBILEPHONE)</td>
                        <td>@Html.DisplayFor(modelItem => user.PHONE)</td>
                        <td>@Html.DisplayFor(modelItem => user.EMAIL)</td>
                        <td>@Html.DisplayFor(modelItem => user.Role.ROLENAME)</td>
                        @{
                            string lable = (user.USERSTATE != null && user.USERSTATE.Value) ? "启用" : "禁用";
                        }
                        @if(@lable=="禁用")
                        {
                            <td style="color:red; font-size:24px;">@lable</td>
                        }
                        else
                        {
                            <td style="color:green;">@lable</td>
                        }
                        
                        <td>
                           @Html.ActionLink("编辑", "Edit", new { id = user.USERID }, new { @class = "btn btn-success", target = "_blank" })
                           | @Html.ActionLink("启用", "ModifyUserState", new { id = user.USERID, UserState = 1 }, new { @class = "btn btn-danger" })
                            @Html.ActionLink("禁用", "ModifyUserState", new { id = user.USERID, UserState = 0 }, new { @class = "btn btn-danger" })
                            | @Html.ActionLink("密码重置", "ResetPassword", new { id = user.USERID }, new { @class = "btn btn-danger" })
                        </td>
                    </tr>
                }
            </tbody>

        </table>

    </div>

</div>
